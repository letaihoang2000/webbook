<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${book.title} + ' - Read Book - BookSaw'">Read Book - BookSaw</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/normalize.css}">
    <link rel="stylesheet" th:href="@{/css/icomoon/icomoon.css}">
    <link rel="stylesheet" th:href="@{/css/vendor.css}">
    <link rel="stylesheet" th:href="@{/css/customer/home.css}">
    <link rel="stylesheet" th:href="@{/css/customer/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/customer/navbar-badges.css}">
    <link rel="stylesheet" th:href="@{/css/customer/read_book.css}">
</head>

<body>

<!-- Include Navbar Fragment -->
<div th:replace="~{fragments/customer_navbar :: navbar}"></div>

<div class="reader-container">
    <!-- Book Header -->
    <div class="book-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <div class="book-info">
                        <h1 th:text="${book.title}">Book Title</h1>
                        <div class="book-meta">
                            <span>
                                <i class="icon icon-user"></i>
                                <strong th:text="${book.author?.name}">Author Name</strong>
                            </span>
                            <span>
                                <i class="icon icon-tag"></i>
                                <span th:text="${book.category?.name}">Category</span>
                            </span>
                            <span>
                                <i class="icon icon-file"></i>
                                <span th:text="${book.page}">300</span> pages
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <a th:href="@{/customer/my-books}" class="action-btn">
                        <i class="icon icon-arrow-left"></i>
                        Back to Library
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- PDF Viewer -->
    <div class="container">
        <div th:if="${book.book_content != null && !book.book_content.isEmpty()}">
            <div class="pdf-viewer-wrapper">
                <!-- Reader Actions Bar -->
                <div class="reader-actions">
                    <div>
                        <span class="text-muted">
                            <i class="icon icon-check-circle text-success"></i>
                            You own this book
                        </span>
                    </div>
                    <div>
                        <a th:href="${book.book_content}"
                           target="_blank"
                           download
                           class="action-btn">
                            <i class="icon icon-download"></i>
                            Download PDF
                        </a>
                        <a th:href="${book.book_content}"
                           target="_blank"
                           class="action-btn primary">
                            <i class="icon icon-external-link"></i>
                            Open in New Tab
                        </a>
                    </div>
                </div>

                <!-- PDF Iframe Viewer -->
                <iframe th:src="${book.book_content}"
                        class="pdf-viewer"
                        title="Book Content">
                    <p>Your browser does not support PDFs.
                        <a th:href="${book.book_content}">Download the PDF</a> instead.</p>
                </iframe>
            </div>
        </div>

        <!-- No Content Available -->
        <div th:if="${book.book_content == null || book.book_content.isEmpty()}"
             class="no-content">
            <i class="icon icon-file-pdf"></i>
            <h3>Content Not Available</h3>
            <p class="text-muted">The PDF content for this book is currently unavailable.</p>
            <a th:href="@{/customer/my-books}" class="btn btn-primary mt-3">
                Back to My Library
            </a>
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="footer" class="mt-5 footer-white">
    <div class="container">
        <div class="row py-4">
            <div class="col-md-12 text-center">
                <p class="mb-0 text-muted">Â© 2024 BookSaw. All rights reserved.</p>
            </div>
        </div>
    </div>
</footer>

<div th:replace="~{modals/customer/signout :: logoutModal}"></div>

<script th:src="@{/js/jquery-1.11.0.min.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/plugins.js}"></script>
<script th:src="@{/js/script.js}"></script>
<script th:src="@{/js/customer/signout.js}"></script>

</body>
</html>