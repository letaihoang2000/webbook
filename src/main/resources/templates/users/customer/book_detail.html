<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${book.title} + ' - BookSaw'">Book Detail - BookSaw</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="_csrf" th:content="${_csrf.token}" content=""/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}" content=""/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

    <link rel="stylesheet" th:href="@{/css/normalize.css}">
    <link rel="stylesheet" th:href="@{/icomoon/icomoon.css}">
    <link rel="stylesheet" th:href="@{/css/vendor.css}">
    <link rel="stylesheet" th:href="@{/css/customer/home.css}">
    <link rel="stylesheet" th:href="@{/css/customer/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/customer/book_detail.css}">
</head>

<body data-bs-spy="scroll" data-bs-target="#header" tabindex="0">

<!-- Include Navbar Fragment -->
<div th:replace="~{fragments/customer_navbar :: navbar}"></div>

<!-- Breadcrumb -->
<section id="breadcrumb" class="py-3">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a th:href="@{/customer/home}">Home</a></li>
                <li class="breadcrumb-item"><a th:href="@{/customer/all-books}">All Books</a></li>
                <li class="breadcrumb-item active" aria-current="page" th:text="${book.title}">Book Title</li>
            </ol>
        </nav>
    </div>
</section>

<!-- Book Detail Section -->
<section id="book-detail" class="py-5">
    <div class="container">
        <div class="row">
            <!-- Book Image -->
            <div class="col-md-5">
                <div class="book-image-wrapper">
                    <img th:src="${book.image}"
                         th:alt="${book.title}"
                         class="book-detail-image">
                    <span class="category-badge" th:text="${book.category_name}">Category</span>
                </div>
            </div>

            <!-- Book Information -->
            <div class="col-md-7">
                <div class="book-info-wrapper">
                    <h1 class="book-detail-title" th:text="${book.title}">Book Title</h1>

                    <div class="book-author">
                        <i class="icon icon-user"></i>
                        <span>by <strong th:text="${book.author_name}">Author Name</strong></span>
                    </div>

                    <div class="book-meta">
                        <div class="meta-item">
                            <i class="icon icon-calendar"></i>
                            <span>Published: <strong th:text="${book.published_date}">2024-01-01</strong></span>
                        </div>
                        <div class="meta-item">
                            <i class="icon icon-book"></i>
                            <span>Pages: <strong th:text="${book.page}">300</strong></span>
                        </div>
                    </div>

                    <div class="book-price-section">
                        <span class="book-price">$<span th:text="${book.price}">29.99</span></span>
                        <span class="price-note">One-time purchase</span>
                    </div>

                    <div class="book-actions">
                        <button class="btn btn-purchase">
                            <i class="icon icon-cart"></i> Purchase & Read
                        </button>
                        <button class="btn btn-wishlist wishlist-btn"
                                th:classappend="${isInWishlist} ? 'in-wishlist' : ''"
                                th:attr="data-book-id=${book.book_id}">
                            <i class="icon icon-heart"></i>
                            <span th:text="${isInWishlist} ? 'Remove from Wishlist' : 'Add to Wishlist'">Add to Wishlist</span>
                        </button>
                    </div>

                    <div class="purchase-benefits">
                        <h5>What you'll get:</h5>
                        <ul>
                            <li><i class="icon icon-check"></i> Full access to read online</li>
                            <li><i class="icon icon-check"></i> Download PDF version</li>
                            <li><i class="icon icon-check"></i> Lifetime access</li>
                            <li><i class="icon icon-check"></i> Read on any device</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Book Description -->
        <div class="row mt-5">
            <div class="col-md-12">
                <div class="book-description-section">
                    <h3 class="section-title">About This Book</h3>
                    <div class="description-content" th:utext="${book.description}">
                        Book description goes here...
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Preview Notice -->
        <div class="row mt-4">
            <div class="col-md-12">
                <div class="content-locked-notice">
                    <div class="lock-icon">
                        <i class="icon icon-lock"></i>
                    </div>
                    <h4>Full Content Available After Purchase</h4>
                    <p>Purchase this book to unlock the complete reading experience. You'll get instant access to read online and download the PDF version.</p>
                    <button class="btn btn-unlock">
                        <i class="icon icon-unlock"></i> Unlock Full Content - $<span th:text="${book.price}">29.99</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Books Section -->
<section id="related-books" class="bookshelf py-5 my-5" th:if="${!relatedBooks.isEmpty()}">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="section-header align-center">
                    <div class="title">
                        <span>You might also like</span>
                    </div>
                    <h2 class="section-title">Related Books</h2>
                </div>

                <div class="product-list">
                    <div class="row">
                        <div class="col-md-3 col-sm-6 mb-4" th:each="relatedBook : ${relatedBooks}">
                            <div class="product-item">
                                <figure class="product-style">
                                    <a th:href="@{/customer/book/{id}(id=${relatedBook.book_id})}">
                                        <img th:src="${relatedBook.image}"
                                             th:alt="${relatedBook.title}"
                                             class="product-item">
                                    </a>
                                    <a th:href="@{/customer/book/{id}(id=${relatedBook.book_id})}"
                                       class="view-details-btn">
                                        View Details
                                    </a>
                                </figure>
                                <figcaption>
                                    <div class="item-category" th:text="${relatedBook.category_name}">Category</div>
                                    <h3 class="item-title">
                                        <a th:href="@{/customer/book/{id}(id=${relatedBook.book_id})}"
                                           th:text="${relatedBook.title}">Book Title</a>
                                    </h3>
                                    <span class="item-author" th:text="${relatedBook.author_name}">Author</span>
                                    <div class="item-price">$ <span th:text="${relatedBook.price}">0.00</span></div>
                                </figcaption>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-md-12 text-center">
                        <a th:href="@{/customer/all-books(categoryId=${book.category_id})}"
                           class="btn btn-outline-accent btn-accent-arrow">
                            View More in <span th:text="${book.category_name}">Category</span>
                            <i class="icon icon-ns-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer id="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="footer-item">
                    <div class="company-brand">
                        <img th:src="@{/images/main-logo.png}" alt="logo" class="footer-logo">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sagittis sed ptibus liberolectus
                            nonet psryroin.</p>
                    </div>
                </div>
            </div>

            <div class="col-md-2">
                <div class="footer-menu">
                    <h5>About Us</h5>
                    <ul class="menu-list">
                        <li class="menu-item"><a href="#">vision</a></li>
                        <li class="menu-item"><a href="#">articles</a></li>
                        <li class="menu-item"><a href="#">careers</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-md-2">
                <div class="footer-menu">
                    <h5>Discover</h5>
                    <ul class="menu-list">
                        <li class="menu-item"><a th:href="@{/customer/home}">Home</a></li>
                        <li class="menu-item"><a th:href="@{/customer/all-books}">Books</a></li>
                        <li class="menu-item"><a href="#">Authors</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-md-2">
                <div class="footer-menu">
                    <h5>My account</h5>
                    <ul class="menu-list">
                        <li class="menu-item"><a href="#">View Cart</a></li>
                        <li class="menu-item"><a href="#">My Wishlist</a></li>
                        <li class="menu-item"><a href="#">My Orders</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-md-2">
                <div class="footer-menu">
                    <h5>Help</h5>
                    <ul class="menu-list">
                        <li class="menu-item"><a href="#">Help center</a></li>
                        <li class="menu-item"><a href="#">Contact us</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>

<div id="footer-bottom">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="copyright">
                    <div class="row">
                        <div class="col-md-6">
                            <p>Â© 2022 All rights reserved. Free HTML Template by
                                href="https://www.templatesjungle.com/" target="_blank">TemplatesJungle</a></p>
                        </div>
                        <div class="col-md-6">
                            <div class="social-links align-right">
                                <ul>
                                    <li><a href="#"><i class="icon icon-facebook"></i></a></li>
                                    <li><a href="#"><i class="icon icon-twitter"></i></a></li>
                                    <li><a href="#"><i class="icon icon-youtube-play"></i></a></li>
                                    <li><a href="#"><i class="icon icon-behance-square"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{modals/customer/signout :: logoutModal}"></div>

<script th:src="@{/js/jquery-1.11.0.min.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
<script th:src="@{/js/plugins.js}"></script>
<script th:src="@{/js/script.js}"></script>
<script th:src="@{/js/customer/signout.js}"></script>
<script th:src="@{/js/customer/wishlist.js}"></script>

</body>
</html>